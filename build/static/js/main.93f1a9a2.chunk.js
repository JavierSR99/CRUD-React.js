(this["webpackJsonplogin-auth-1"]=this["webpackJsonplogin-auth-1"]||[]).push([[0],{37:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(1),c=a.n(r),s=a(29),i=a.n(s),o=(a(37),a(7)),u=a(14),l=a(5),b=a(22);a(38),a(41);b.a.initializeApp({apiKey:"AIzaSyB9pfApEFzxUYtepuVgXa57ybo0eNM60s4",authDomain:"crud-react-827b4.firebaseapp.com",databaseURL:"https://crud-react-827b4.firebaseio.com",projectId:"crud-react-827b4",storageBucket:"crud-react-827b4.appspot.com",messagingSenderId:"914795307854",appId:"1:914795307854:web:7a6e12ebf02269a888741f"});var d=b.a.firestore(),j=b.a.auth(),m=a(31),h=a(8),p=a.n(h),f=a(23),x=a(15),O=function(e){var t=Object(r.useState)([]),a=Object(o.a)(t,2),s=a[0],i=a[1],u=Object(r.useState)(""),l=Object(o.a)(u,2),b=l[0],j=l[1],h=Object(r.useState)(!1),O=Object(o.a)(h,2),v=O[0],g=O[1],k=Object(r.useState)(""),N=Object(o.a)(k,2),w=N[0],y=N[1];c.a.useEffect((function(){(function(){var t=Object(x.a)(p.a.mark((function t(){var a,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.collection(e.user.uid).get();case 3:a=t.sent,n=a.docs.map((function(e){return Object(f.a)({id:e.id},e.data())})),i(n),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}})()()}),[e.user.uid]);var E=function(){var t=Object(x.a)(p.a.mark((function t(a){var n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),b.trim()){t.next=4;break}return console.log("elemento vac\xedo"),t.abrupt("return");case 4:return t.prev=4,n={name:b,fecha:Date.now()},t.next=8,d.collection(e.user.uid).add(n);case 8:r=t.sent,i([].concat(Object(m.a)(s),[Object(f.a)(Object(f.a)({},n),{},{id:r.id})])),j(""),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(4),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[4,13]])})));return function(e){return t.apply(this,arguments)}}(),S=function(){var t=Object(x.a)(p.a.mark((function t(a){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.collection(e.user.uid).doc(a).delete();case 3:n=s.filter((function(e){return e.id!==a})),i(n),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),C=function(){var t=Object(x.a)(p.a.mark((function t(a){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),b.trim()){t.next=4;break}return console.log("elemento vac\xedo"),t.abrupt("return");case 4:return t.prev=4,t.next=7,d.collection(e.user.uid).doc(w).update({name:b});case 7:n=s.map((function(e){return e.id===w?{id:e.id,fecha:e.fecha,name:b}:e})),i(n),g(!1),j(""),y(""),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(4),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[4,14]])})));return function(e){return t.apply(this,arguments)}}();return Object(n.jsx)("div",{className:"container mt-3",children:Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col-md-6",children:Object(n.jsx)("ul",{className:"list-group",children:s.map((function(e){return Object(n.jsxs)("li",{className:"list-group-item",children:[e.name,Object(n.jsx)("button",{className:"btn btn-danger btn-sm float-right ml-2",onClick:function(){return S(e.id)},children:"Eliminar"}),Object(n.jsx)("button",{className:"btn btn-warning btn-sm float-right",onClick:function(){return function(e){g(!0),j(e.name),y(e.id)}(e)},children:"Editar"})]},e.id)}))})}),Object(n.jsxs)("div",{className:"col-md-6",children:[Object(n.jsx)("h3",{children:v?"Editar tarea":"Agregar tarea"}),Object(n.jsxs)("form",{onSubmit:v?C:E,children:[Object(n.jsx)("input",{type:"text",placeholder:v?"Edita la tarea":"Agrega una tarea",className:"form-control mb-2",onChange:function(e){return j(e.target.value)},value:b}),Object(n.jsx)("button",{className:v?"btn btn-warning btn-block":"btn btn-dark btn-block",type:"submit",children:v?"Editar":"A\xf1adir"})]})]})]})})},v=Object(l.f)((function(e){var t=c.a.useState(null),a=Object(o.a)(t,2),r=a[0],s=a[1];return c.a.useEffect((function(){j.currentUser?s(j.currentUser):e.history.push("/login")}),[e.history]),Object(n.jsx)("div",{children:r&&Object(n.jsx)(O,{user:r})})})),g=Object(l.f)((function(e){var t=c.a.useState("prueba@prueba.com"),a=Object(o.a)(t,2),r=a[0],s=a[1],i=c.a.useState("123123"),u=Object(o.a)(i,2),l=u[0],b=u[1],m=c.a.useState(null),h=Object(o.a)(m,2),f=h[0],O=h[1],v=c.a.useState(!0),g=Object(o.a)(v,2),k=g[0],N=g[1],w=c.a.useCallback(Object(x.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.signInWithEmailAndPassword(r,l);case 3:s(""),b(""),O(null),e.history.push("/admin"),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(0),"auth/invalid-email"===t.t0.code&&O("Email inv\xe1lido :("),"auth/user-not-found"===t.t0.code&&O("El email introducido no tiene cuenta asociada :("),"auth/wrong-password"===t.t0.code&&O("Contrase\xf1a incorrecta :(");case 14:case"end":return t.stop()}}),t,null,[[0,9]])}))),[r,l,e.history]),y=c.a.useCallback(Object(x.a)(p.a.mark((function t(){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j.createUserWithEmailAndPassword(r,l);case 3:return a=t.sent,t.next=6,d.collection("usuarios").doc(a.user.email).set({email:a.user.email,uid:a.user.uid});case 6:return t.next=8,d.collection(a.user.uid).add({name:"Bienvenido :)",fecha:Date.now()});case 8:s(""),b(""),O(null),e.history.push("/admin"),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),"auth/invalid-email"===t.t0.code&&O("El email introducido es inv\xe1lido :("),"auth/email-already-in-use"===t.t0.code&&O("Email ya utilizado :((");case 18:case"end":return t.stop()}}),t,null,[[0,14]])}))),[r,l,e.history]);return Object(n.jsxs)("div",{className:"mt-3",children:[Object(n.jsx)("h3",{className:"text-center",children:k?"Registro":"Inicia sesi\xf3n"}),Object(n.jsx)("hr",{}),Object(n.jsx)("div",{className:"row justify-content-center",children:Object(n.jsx)("div",{className:"col-12 col-sm-8 col-md-6 col-xl-4",children:Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),r.trim()?l.trim()?l.length<6?O("La contrase\xf1a debe tener un m\xednimo de 6 caracteres"):(O(null),k?y():w()):O("Escribe una contrase\xf1a"):O("Escribe un email")},children:[f&&Object(n.jsx)("div",{className:"alert alert-danger",children:f}),Object(n.jsx)("input",{type:"email",className:"form-control mb-2",placeholder:"Escribe tu email",onChange:function(e){return s(e.target.value)},value:r}),Object(n.jsx)("input",{type:"password",className:"form-control mb-2",placeholder:"Escribe tu contrase\xf1a",onChange:function(e){return b(e.target.value)},value:l}),Object(n.jsx)("button",{className:"btn btn-dark btn-lg btn-block",type:"submit",children:k?"Registrarse":"Entrar"}),Object(n.jsx)("button",{type:"button",className:"btn btn-info btn-sm btn-block",onClick:function(){return N(!k)},children:k?"\xbfYa est\xe1s registrado?":"\xbfNo tienes cuenta?"})]})})})]})})),k=Object(l.f)((function(e){return Object(n.jsxs)("div",{className:"navbar navbar-dark bg-dark",children:[Object(n.jsx)(u.b,{className:"navbar-brand",to:"/",children:"AUTH"}),Object(n.jsx)("div",{children:Object(n.jsxs)("div",{className:"d-flex",children:[Object(n.jsx)(u.c,{className:"btn btn-dark mr-2",to:"/",exact:!0,children:"Inicio"}),null!==e.firebaseUser?Object(n.jsx)(u.c,{className:"btn btn-dark mr-2",to:"/admin",children:"Admin"}):null,null!==e.firebaseUser?Object(n.jsx)("button",{className:"btn btn-dark",onClick:function(){j.signOut().then((function(){e.history.push("/login")}))},children:"Cerrar Sesi\xf3n"}):Object(n.jsx)(u.c,{className:"btn btn-dark mr-2",to:"/login",children:"Login"})]})})]})}));var N=function(){var e=c.a.useState(!1),t=Object(o.a)(e,2),a=t[0],r=t[1];return c.a.useEffect((function(){j.onAuthStateChanged((function(e){r(e||null)}))}),[]),!1!==a?Object(n.jsx)(u.a,{children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)(k,{firebaseUser:a}),Object(n.jsxs)(l.c,{children:[Object(n.jsx)(l.a,{path:"/",exact:!0,children:"inicio..."}),Object(n.jsx)(l.a,{path:"/login",children:Object(n.jsx)(g,{})}),Object(n.jsx)(l.a,{path:"/admin",children:Object(n.jsx)(v,{})})]})]})}):Object(n.jsx)("h1",{children:"Cargando..."})};i.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(N,{})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.93f1a9a2.chunk.js.map